<br>
<br>
<div class="container">
  <h1><strong>My Dashboard</strong></h1>
<br>
<div class="tabs">

  <input type="radio" id="tab1" name="tab-control" checked>
  <input type="radio" id="tab2" name="tab-control">
  <input type="radio" id="tab3" name="tab-control">
  <ul>
    <li title="My bookings"><label for="tab1" role="button"><svg viewBox="0 0 24 24"><path d="M14,2A8,8 0 0,0 6,10A8,8 0 0,0 14,18A8,8 0 0,0 22,10H20C20,13.32 17.32,16 14,16A6,6 0 0,1 8,10A6,6 0 0,1 14,4C14.43,4 14.86,4.05 15.27,4.14L16.88,2.54C15.96,2.18 15,2 14,2M20.59,3.58L14,10.17L11.62,7.79L10.21,9.21L14,13L22,5M4.93,5.82C3.08,7.34 2,9.61 2,12A8,8 0 0,0 10,20C10.64,20 11.27,19.92 11.88,19.77C10.12,19.38 8.5,18.5 7.17,17.29C5.22,16.25 4,14.21 4,12C4,11.7 4.03,11.41 4.07,11.11C4.03,10.74 4,10.37 4,10C4,8.56 4.32,7.13 4.93,5.82Z"/>
</svg><br><span>My bookings</span></label></li>
    <li title="Upcoming bookings for my lamas"><label for="tab2" role="button"><svg viewBox="0 0 24 24"><path d="M2,10.96C1.5,10.68 1.35,10.07 1.63,9.59L3.13,7C3.24,6.8 3.41,6.66 3.6,6.58L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.66,6.72 20.82,6.88 20.91,7.08L22.36,9.6C22.64,10.08 22.47,10.69 22,10.96L21,11.54V16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V10.96C2.7,11.13 2.32,11.14 2,10.96M12,4.15V4.15L12,10.85V10.85L17.96,7.5L12,4.15M5,15.91L11,19.29V12.58L5,9.21V15.91M19,15.91V12.69L14,15.59C13.67,15.77 13.3,15.76 13,15.6V19.29L19,15.91M13.85,13.36L20.13,9.73L19.55,8.72L13.27,12.35L13.85,13.36Z" />
</svg><br><span>Upcoming bookings for my lamas</span></label></li>
    <li title="My own lamas"><label for="tab3" role="button"><svg viewBox="0 0 24 24">
    <path d="M3,4A2,2 0 0,0 1,6V17H3A3,3 0 0,0 6,20A3,3 0 0,0 9,17H15A3,3 0 0,0 18,20A3,3 0 0,0 21,17H23V12L20,8H17V4M10,6L14,10L10,14V11H4V9H10M17,9.5H19.5L21.47,12H17M6,15.5A1.5,1.5 0 0,1 7.5,17A1.5,1.5 0 0,1 6,18.5A1.5,1.5 0 0,1 4.5,17A1.5,1.5 0 0,1 6,15.5M18,15.5A1.5,1.5 0 0,1 19.5,17A1.5,1.5 0 0,1 18,18.5A1.5,1.5 0 0,1 16.5,17A1.5,1.5 0 0,1 18,15.5Z" />
</svg><br><span>My own lamas</span></label></li>
  </ul>

  <div class="slider"><div class="indicator"></div></div>
  <div class="content">
    <section>
      <h2>My bookings</h2>
      <% @user = current_user %>
      <% unless @user.bookings.count == 0 %>
      <h2>My upcoming bookings</h2>
      <% @user.bookings.each do |booking| %>
        <div class="booking-card d-flex justify-content-between align-items-center bd-highlight">
          <div class="card-product my-4">
          <% if booking.lama.photos.first %>
            <%= cl_image_tag booking.lama.photos.first.key, crop: :fill %>
          <% else %>
            <img src="https://images.unsplash.com/photo-1546273703-d2658be9de64?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=670&q=80" class="card-img-top" alt="lama">
          <% end %>
            <div class="card-product-infos">
              <h2><%= booking.lama.title %></h2>
              <p>From <strong><%= booking.start.strftime("%d %B %Y") %></strong> to <strong><%= booking.end.strftime("%d %B %Y") %></strong></p>
              <p>Total price : <strong><%= booking.lama.price %>€</strong></p>
              <p>For : <strong><%= booking.number_of_users %></strong> <%= booking.number_of_users == 1 ? "traveller" : "travellers" %></p>
              <p><%= booking.driver_manager ? "✅ driver" : "❌ driver" %></p>
              <p>Status : <%= booking.status == "pending" ? "pending" : "validated" %></p>
            </div>
            <% if booking.status != "pending" %>
              <%= link_to "Leave a review", new_lama_review_path(booking.lama), class: 'btn btn-primary btn-block' %>
            <% else %>
            <% end %>
          </div>
        </div>
        <%= link_to "Cancel booking", user_booking_path(@user, booking), method: :delete, data: { confirm: "Are you sure?" }, class: 'btn btn-primary btn-block' %>
      <% end %>
      <% end %></section>
        <section>
          <h2>Upcoming bookings for my lamas</h2>
          <% @user = current_user %>
          <h2>Upcoming bookings for my lamas.</h2>
          <% @bookings.each do |booking| %>
            <% if booking.lama.user_id == @user.id %>
            <div class="booking-card d-flex justify-content-between align-items-center bd-highlight">
              <div class="card-product my-4">
              <% if booking.lama.photos.first %>
                <%= cl_image_tag booking.lama.photos.first.key, crop: :fill %>
              <% else %>
                <img src="https://images.unsplash.com/photo-1546273703-d2658be9de64?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=670&q=80" class="card-img-top" alt="lama">
              <% end %>
                <div class="card-product-infos">
                  <h2><%= booking.lama.title %></h2>
                  <p>From <strong><%= booking.start %></strong> to <strong><%= booking.end %></strong></p>
                  <p>Total price : <strong><%= booking.lama.price %>€</strong></p>
                  <p>For : <strong><%= booking.number_of_users %></strong> <%= booking.number_of_users == 1 ? "traveller" : "travellers" %></p>
                  <p><%= booking.driver_manager ? "✅ driver" : "❌ driver" %></p>

                </div>
                <% if booking.status == "pending" %>
                  <%= link_to "Validate", user_booking_path(@user, booking), method: :patch, class: 'btn btn-success' %>
                <% else %>
                  <%= link_to "Confirmed", "#", class: 'btn btn-success float-right' %>
                <% end %>
              </div>
            </div>
            <% else %>
            <% end %>
          <% end %></section>
        <section>
          <h2>My own lamas</h2>
            <div class="col-6">
              <h2>My own lamas</h2>
                <% @user = current_user %>
                  <% @lamas.each do |lama|  %>
                    <%= link_to lama_path(lama) do %>
                      <div class="lama-list d-flex justify-content-between">
                        <div class="lama-avatar">
                          <% if lama.photos.first %>
                            <%= cl_image_tag lama.photos.first.key, crop: :fill, class: "avatar-square", height: 50, width: 50, alt: "avatar-square"%>
                          <% else %>
                            <img src="https://images.unsplash.com/photo-1546273703-d2658be9de64?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=670&q=80", class= "avatar-square", height= 50, width= 50, alt= "avatar-square">
                          <% end %>
                        </div>
                        <div class="lama-infos-small">
                          <p><%= lama.title %></p>
                          <%= link_to user_lama_path(@user, lama), method: :delete, data: { confirm: "Are you sure?" } do %>
                            <i class="fas fa-trash-alt"></i>
                          <% end %>
                        </div>
                      </div>
                    <% end %>
                  <% end %>
              </div>
            </div>
        </section>
    <section>
  </div>
</div>
</div>




